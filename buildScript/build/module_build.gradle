// 模块的独立调试脚本
def appModules = "$rootProject.ext.appModules"
def modules = appModules.split(",")
def contains = modules.contains(project.getName())

// 如果不包含在App，则作为独立项目运行
if (contains) {
    apply plugin: 'com.android.library'
} else {
    apply plugin: 'com.android.application'
}

delete project.buildDir

// 根据是否被app包含调用不同的manifest
android {
    sourceSets {
        main {
            if (contains) {
                manifest.srcFile 'src/main/AndroidManifest.xml'
            } else {
                manifest.srcFile 'src/main/debug/AndroidManifest.xml'
            }
        }
    }
}